generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id     Int     @id @default(autoincrement())
  name   String
  email  String  @unique
  orders Order[]
}

model Product {
  id             Int         @id @default(autoincrement())
  name           String
  price          Float
  stock_quantity Int
  orderItems     OrderItem[]
}

model Order {
  id           Int         @id @default(autoincrement())
  user         User        @relation(fields: [userId], references: [id])
  userId       Int
  total_amount Float
  status       OrderStatus
  created_at   DateTime    @default(now())
  orderItems   OrderItem[]
}

model OrderItem {
  id         Int     @id @default(autoincrement())
  order      Order   @relation(fields: [orderId], references: [id])
  orderId    Int
  product    Product @relation(fields: [productId], references: [id])
  productId  Int
  quantity   Int
  unit_price Float
}

enum OrderStatus {
  created
  paid
  failed
  cancelled
  shipped
}
